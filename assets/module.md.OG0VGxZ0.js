import{_ as a,c as n,o as e,ah as i}from"./chunks/framework.C2PqkmK9.js";const g=JSON.parse('{"title":"收货地址","description":"","frontmatter":{},"headers":[],"relativePath":"module.md","filePath":"module.md"}'),t={name:"module.md"};function p(l,s,d,c,o,h){return e(),n("div",null,s[0]||(s[0]=[i(`<h1 id="收货地址" tabindex="-1">收货地址 <a class="header-anchor" href="#收货地址" aria-label="Permalink to “收货地址”">​</a></h1><p>address</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>//用户地址</span></span>
<span class="line"><span>address: {</span></span>
<span class="line"><span>    //获取地址列表</span></span>
<span class="line"><span>    index: domain + &#39;/address/api-user/index&#39;,</span></span>
<span class="line"><span>    //获取城市列表</span></span>
<span class="line"><span>    city: domain + &#39;/address/api/index&#39;,</span></span>
<span class="line"><span>    //获取地址详情</span></span>
<span class="line"><span>    view: domain + &#39;/address/api-user/view&#39;,</span></span>
<span class="line"><span>    //获取默认地址</span></span>
<span class="line"><span>    default: domain + &#39;/address/api-user/default&#39;,</span></span>
<span class="line"><span>    //创建地址</span></span>
<span class="line"><span>    create: domain + &#39;/address/api-user/create&#39;,</span></span>
<span class="line"><span>    //更新地址</span></span>
<span class="line"><span>    update: domain + &#39;/address/api-user/update&#39;,</span></span>
<span class="line"><span>    //删除地址</span></span>
<span class="line"><span>    del: domain + &#39;/address/api-user/del&#39;,</span></span>
<span class="line"><span>},</span></span></code></pre></div><p>字段</p><table tabindex="0"><thead><tr><th>字段</th><th>事例值</th><th>描述</th></tr></thead><tbody><tr><td>city</td><td>北京市</td><td>城市</td></tr><tr><td>detail</td><td>具体的地址</td><td>详细地址</td></tr><tr><td>district</td><td>西城区</td><td>区县</td></tr><tr><td>id</td><td>1</td><td>地址id</td></tr><tr><td>is_default</td><td>1</td><td>是否默认</td></tr><tr><td>name</td><td>大先生</td><td>收货人姓名</td></tr><tr><td>phone</td><td>19900000000</td><td>收货人手机号</td></tr><tr><td>province</td><td>北京市</td><td>省份</td></tr><tr><td>region</td><td>[&quot;北京市&quot;, &quot;北京市&quot;, &quot;东城区&quot;]</td><td>区域</td></tr></tbody></table><p>index 列表返回有 <code>full_address</code> 完整的收货地址</p><h2 id="发送邮件" tabindex="-1">发送邮件 <a class="header-anchor" href="#发送邮件" aria-label="Permalink to “发送邮件”">​</a></h2><p>调用事例</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>//发送邮箱验证码</span></span>
<span class="line"><span>$code = rand(100000, 999999); </span></span>
<span class="line"><span>add_mail_template(&#39;bind_account&#39;, &quot;绑定邮箱&quot;, &#39;绑定邮箱验证&#39;, &#39;您正在绑定邮箱，您的验证码是&lt;b&gt;{code}&lt;/b&gt;,5分钟有效，如非本人请求请忽略。&#39;);</span></span>
<span class="line"><span>cache(&quot;bind_account_{$email}&quot;, $code, 300);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>send_mail(&#39;bind_account&#39;, $email, [</span></span>
<span class="line"><span>    &#39;code&#39; =&gt;  $code,</span></span>
<span class="line"><span>]);</span></span></code></pre></div><blockquote><p>模板发送邮件</p></blockquote><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>send_mail($template_code, $address, $replace = [])</span></span></code></pre></div><blockquote><p>添加模板</p></blockquote><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>add_mail_template($name,$code,$title,$content)</span></span></code></pre></div><blockquote><p>测试模板</p></blockquote><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>/email/site/code?email=你的邮件地址</span></span></code></pre></div><blockquote><p>原始发送邮件，一般建议使用上面的模板形式发送</p></blockquote><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>use modules\\email\\lib\\Mail;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Mail::send(&#39;to@example.com&#39;, &#39;subject&#39;, &#39;body&#39;);</span></span></code></pre></div><h1 id="多语言" tabindex="-1">多语言 <a class="header-anchor" href="#多语言" aria-label="Permalink to “多语言”">​</a></h1><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>language</span></span></code></pre></div><h2 id="小牛翻译" tabindex="-1">小牛翻译 <a class="header-anchor" href="#小牛翻译" aria-label="Permalink to “小牛翻译”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>use modules\\language\\lib\\Niutrans;</span></span>
<span class="line"><span>Niutrans::translate(&#39;你好&#39;);</span></span></code></pre></div><h1 id="小程序接口" tabindex="-1">小程序接口 <a class="header-anchor" href="#小程序接口" aria-label="Permalink to “小程序接口”">​</a></h1><p>minapp</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>//登录</span></span>
<span class="line"><span>login: {</span></span>
<span class="line"><span>    //微信小程序openid</span></span>
<span class="line"><span>    openid: domain + &#39;/minapp/api-login/openid&#39;,</span></span>
<span class="line"><span>    //微信小程序手机号授权登录</span></span>
<span class="line"><span>    weixin: domain + &#39;/minapp/api-login/phone&#39;,</span></span>
<span class="line"><span>},</span></span></code></pre></div><h2 id="取用户信息" tabindex="-1">取用户信息 <a class="header-anchor" href="#取用户信息" aria-label="Permalink to “取用户信息”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>/minapp/api-user/info</span></span></code></pre></div><p>返回值</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span></span></span></code></pre></div><h2 id="设置用户信息" tabindex="-1">设置用户信息 <a class="header-anchor" href="#设置用户信息" aria-label="Permalink to “设置用户信息”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>/minapp/api-user/set-info</span></span></code></pre></div><p>参数：</p><ul><li>field: 字段</li><li>value: 值</li></ul><h1 id="支付" tabindex="-1">支付 <a class="header-anchor" href="#支付" aria-label="Permalink to “支付”">​</a></h1><h2 id="微信支付" tabindex="-1">微信支付 <a class="header-anchor" href="#微信支付" aria-label="Permalink to “微信支付”">​</a></h2><p><code>payment_success</code> action说明</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$data = [</span></span>
<span class="line"><span>    &#39;order_num&#39; =&gt; $out_trade_no,</span></span>
<span class="line"><span>    &#39;transaction_id&#39; =&gt; $res[&#39;transaction_id&#39;],</span></span>
<span class="line"><span>    &#39;payment_method&#39; =&gt; &#39;weixin&#39;,</span></span>
<span class="line"><span>    &#39;currency&#39; =&gt; $res[&#39;amount&#39;][&#39;currency&#39;],</span></span>
<span class="line"><span>    &#39;amount&#39; =&gt; bcdiv($res[&#39;amount&#39;][&#39;total&#39;], 100, 2),</span></span>
<span class="line"><span>    &#39;openid&#39; =&gt; $res[&#39;payer&#39;][&#39;openid&#39;],</span></span>
<span class="line"><span>    &#39;paid_at&#39; =&gt; $success_time,</span></span>
<span class="line"><span>    &#39;app_id&#39; =&gt; $res[&#39;appid&#39;],</span></span>
<span class="line"><span>]; </span></span>
<span class="line"><span>add_log(&#39;微信支付查寻&#39;, $data, &#39;debug&#39;);</span></span>
<span class="line"><span>do_action(&#39;payment_success&#39;, $data);</span></span></code></pre></div><h2 id="短信" tabindex="-1">短信 <a class="header-anchor" href="#短信" aria-label="Permalink to “短信”">​</a></h2><p>短信服务由第三方提供</p><ul><li>默认为直连</li><li><a href="https://dysms.console.aliyun.com/" target="_blank" rel="noreferrer">阿里云短信</a></li><li><a href="https://console.cloud.tencent.com/smsv2/app-manage" target="_blank" rel="noreferrer">腾讯云短信</a></li></ul><p>调用事例</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>//发送邮箱验证码</span></span>
<span class="line"><span>$code = rand(100000, 999999); </span></span>
<span class="line"><span>add_sms_template(&#39;bind_account&#39;, &quot;绑定邮箱&quot;, &#39;绑定邮箱验证&#39;, &#39;您正在绑定邮箱，您的验证码是&lt;b&gt;{code}&lt;/b&gt;,5分钟有效，如非本人请求请忽略。&#39;);</span></span>
<span class="line"><span>cache(&quot;bind_account_{$phone}&quot;, $code, 300);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>send_sms(&#39;bind_account&#39;, $phone, [</span></span>
<span class="line"><span>    &#39;code&#39; =&gt;  $code,</span></span>
<span class="line"><span>]);</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>send_sms($phone, $template_code, $replace = [])</span></span></code></pre></div><p>添加模板</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>add_sms_template($code, $name, $title, $content)</span></span></code></pre></div><p>用法与邮箱类似</p><p>验证短信时模板代码是 <code>login</code> ，需要验证码的变量是 <code>{code}</code></p>`,46)]))}const k=a(t,[["render",p]]);export{g as __pageData,k as default};
