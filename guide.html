<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>指南 | NexoPHP</title>
    <meta name="description" content="NexoPHP 是一个基于 PHP 8.x 版本的框架，它的目标是为 PHP 开发者提供一个简单、快速、安全的软件开发框架">
    <meta name="generator" content="VitePress v2.0.0-alpha.8">
    <link rel="preload stylesheet" href="/assets/style.CwvA7jgV.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CCch1y4U.js"></script>
    <link rel="modulepreload" href="/assets/chunks/theme.CoVJtg7q.js">
    <link rel="modulepreload" href="/assets/chunks/framework.C2PqkmK9.js">
    <link rel="modulepreload" href="/assets/guide.md.BaoAUaJn.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5e06b97a><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5e06b97a data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-0ae64501><div class="wrapper" data-v-0ae64501><div class="container" data-v-0ae64501><div class="title" data-v-0ae64501><div class="VPNavBarTitle" data-v-0ae64501 data-v-1e38c6bc><a class="title" href="/" data-v-1e38c6bc><!--[--><!--]--><!----><span data-v-1e38c6bc>NexoPHP</span><!--[--><!--]--></a></div></div><div class="content" data-v-0ae64501><div class="content-body" data-v-0ae64501><!--[--><!--]--><div class="VPNavBarSearch search" data-v-0ae64501><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-0ae64501 data-v-39714824><span id="main-nav-aria-label" class="visually-hidden" data-v-39714824> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/home.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>入门</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/guide.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>进阶</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/db.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>数据库</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/fun.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>函数</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/action.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Action</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/module.html" tabindex="0" data-v-39714824 data-v-e56f3d57><!--[--><span data-v-e56f3d57>模块</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-0ae64501 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-0ae64501 data-v-bb2aa2f0 data-v-3ab3deac><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-3ab3deac><span class="vpi-more-horizontal icon" data-v-3ab3deac></span></button><div class="menu" data-v-3ab3deac><div class="VPMenu" data-v-3ab3deac data-v-c9afd7f1><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-0ae64501 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-0ae64501><div class="divider-line" data-v-0ae64501></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-5e06b97a data-v-e30e5487><div class="container" data-v-e30e5487><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-e30e5487 data-v-5fabb9ca><button data-v-5fabb9ca>Return to top</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-5e06b97a data-v-aff0b8d7><div class="VPDoc has-aside" data-v-aff0b8d7 data-v-7011f0d8><!--[--><!--]--><div class="container" data-v-7011f0d8><div class="aside" data-v-7011f0d8><div class="aside-curtain" data-v-7011f0d8></div><div class="aside-container" data-v-7011f0d8><div class="aside-content" data-v-7011f0d8><div class="VPDocAside" data-v-7011f0d8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-60d5052e><div class="content" data-v-60d5052e><div class="outline-marker" data-v-60d5052e></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-60d5052e> </div><ul class="VPDocOutlineItem root" data-v-60d5052e data-v-2d0bdf9b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-7011f0d8><div class="content-container" data-v-7011f0d8><!--[--><!--]--><main class="main" data-v-7011f0d8><div style="position:relative;" class="vp-doc _guide" data-v-7011f0d8><div><h1 id="指南" tabindex="-1">指南 <a class="header-anchor" href="#指南" aria-label="Permalink to “指南”">​</a></h1><h2 id="判断是否有权限" tabindex="-1">判断是否有权限 <a class="header-anchor" href="#判断是否有权限" aria-label="Permalink to “判断是否有权限”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>has_access($str)</span></span></code></pre></div><p>同 <code>if_access($str)</code></p><p>判断是否有权限，user表id为1是超管，将会跳过权限检查。</p><p><code>$str</code>是url，如 <code>admin/site/index</code></p><p>当不希望判断权限时需在控制器加</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>/**</span></span>
<span class="line"><span>* 请求前，什么都不写则不检查权限</span></span>
<span class="line"><span>*/</span></span>
<span class="line"><span>public function before(){</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="添加菜单" tabindex="-1">添加菜单 <a class="header-anchor" href="#添加菜单" aria-label="Permalink to “添加菜单”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span></span></span>
<span class="line"><span>use core\Menu;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 设置分组（可选，默认为&#39;admin&#39;）</span></span>
<span class="line"><span>Menu::setGroup(&#39;admin&#39;);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 添加顶级菜单</span></span>
<span class="line"><span>Menu::add(&#39;system&#39;, &#39;系统管理&#39;, &#39;&#39;, &#39;bi-gear&#39;, 50);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 添加子菜单（使用&#39;system&#39;作为parent_name，而不是$topId）</span></span>
<span class="line"><span>Menu::add(&#39;module&#39;, &#39;模块&#39;, &#39;/admin/module&#39;, &#39;&#39;, 100, &#39;system&#39;);</span></span>
<span class="line"><span>Menu::add(&#39;setting&#39;, &#39;设置&#39;, &#39;/admin/setting&#39;, &#39;&#39;, 50, &#39;system&#39;);</span></span>
<span class="line"><span>Menu::add(&#39;user&#39;, &#39;用户管理&#39;, &#39;/admin/user&#39;, &#39;&#39;, 30, &#39;system&#39;);</span></span>
<span class="line"><span>Menu::add(&#39;role&#39;, &#39;角色管理&#39;, &#39;/admin/role&#39;, &#39;&#39;, 20, &#39;system&#39;);</span></span></code></pre></div><h2 id="vue" tabindex="-1">vue <a class="header-anchor" href="#vue" aria-label="Permalink to “vue”">​</a></h2><p>vue 2</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$vue =  new Vue;</span></span></code></pre></div><h3 id="index" tabindex="-1">index <a class="header-anchor" href="#index" aria-label="Permalink to “index”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;el-table-column type=&quot;index&quot; label=&quot;序号&quot; :index=&quot;indexMethod&quot; width=&quot;80&quot;&gt;</span></span>
<span class="line"><span>&lt;/el-table-column&gt;</span></span></code></pre></div><h3 id="时间区间" tabindex="-1">时间区间 <a class="header-anchor" href="#时间区间" aria-label="Permalink to “时间区间”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$vue-&gt;search_date = [</span></span>
<span class="line"><span>  &#39;今天&#39;,</span></span>
<span class="line"><span>  &#39;昨天&#39;,</span></span>
<span class="line"><span>  &#39;本周&#39;,</span></span>
<span class="line"><span>  &#39;上周&#39;,</span></span>
<span class="line"><span>  &#39;上上周&#39;,</span></span>
<span class="line"><span>  &#39;本月&#39;,</span></span>
<span class="line"><span>  &#39;上月&#39;,</span></span>
<span class="line"><span>  &#39;上上月&#39;,</span></span>
<span class="line"><span>  &#39;本年&#39;=&gt;&#39;今年&#39;, </span></span>
<span class="line"><span>  &#39;上年&#39;=&gt;&#39;去年&#39;,</span></span>
<span class="line"><span>  &#39;上上年&#39;,</span></span>
<span class="line"><span>  &#39;最近一个月&#39;,</span></span>
<span class="line"><span>  &#39;最近两个月&#39;,</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  &#39;最近三个月&#39;,</span></span>
<span class="line"><span>  &#39;第一季度&#39;, </span></span>
<span class="line"><span>  &#39;第二季度&#39;, </span></span>
<span class="line"><span>  &#39;第三季度&#39;, </span></span>
<span class="line"><span>  &#39;第四季度&#39;, </span></span>
<span class="line"><span>];</span></span>
<span class="line"><span>//限制在这个时间之前的无法选择</span></span>
<span class="line"><span>$vue-&gt;start_date = &#39;2023-11-01&#39;;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>$vue-&gt;addDate();</span></span></code></pre></div><p>date-picker</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;el-date-picker   v-model=&quot;where.date&quot; value-format=&quot;yyyy-MM-dd&quot; :picker-options=&quot;pickerOptions&quot; size=&quot;medium&quot; type=&quot;daterange&quot; range-separator=&quot;至&quot; start-placeholder=&quot;开始日期&quot; end-placeholder=&quot;结束日期&quot;&gt;</span></span>
<span class="line"><span>&lt;/el-date-picker&gt;</span></span></code></pre></div><h3 id="data" tabindex="-1">data <a class="header-anchor" href="#data" aria-label="Permalink to “data”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$vue-&gt;data(&#39;text&#39;,&#39;welcome&#39;);</span></span></code></pre></div><h3 id="created" tabindex="-1">created <a class="header-anchor" href="#created" aria-label="Permalink to “created”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$vue-&gt;created([&#39;load()&#39;]);</span></span>
<span class="line"><span>$vue-&gt;method(&#39;load()&#39;,&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&quot;);</span></span></code></pre></div><h3 id="mounted" tabindex="-1">mounted <a class="header-anchor" href="#mounted" aria-label="Permalink to “mounted”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$vue-&gt;mounted(&quot;name1&quot;,&quot;</span></span>
<span class="line"><span>  alert(2);</span></span>
<span class="line"><span>&quot;)</span></span></code></pre></div><p>其中<code>name1</code>是<code>key</code>,用于生成唯一的js</p><h3 id="watch" tabindex="-1">watch <a class="header-anchor" href="#watch" aria-label="Permalink to “watch”">​</a></h3><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$vue-&gt;watch(&quot;page(new_val,old_val)&quot;,&quot;</span></span>
<span class="line"><span>  console.log(&#39;watch&#39;);</span></span>
<span class="line"><span>  console.log(old_val);</span></span>
<span class="line"><span>  console.log(new_val);</span></span>
<span class="line"><span>&quot;)</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$vue-&gt;watch(&quot;where.per_page&quot;,&quot;</span></span>
<span class="line"><span>  handler(new_val,old_val){</span></span>
<span class="line"><span>    console.log(&#39;watch&#39;);</span></span>
<span class="line"><span>    console.log(old_val);</span></span>
<span class="line"><span>    console.log(new_val);</span></span>
<span class="line"><span>  },  </span></span>
<span class="line"><span>&quot;);</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$vue-&gt;watch(&quot;where&quot;,&quot;</span></span>
<span class="line"><span>  handler(new_val,old_val){</span></span>
<span class="line"><span>    console.log(&#39;watch&#39;);</span></span>
<span class="line"><span>    console.log(old_val.per_page);</span></span>
<span class="line"><span>    console.log(new_val.per_page);</span></span>
<span class="line"><span>  }, </span></span>
<span class="line"><span>  deep: true</span></span>
<span class="line"><span>&quot;);</span></span></code></pre></div><h2 id="wangeditor-富文本" tabindex="-1">wangeditor 富文本 <a class="header-anchor" href="#wangeditor-富文本" aria-label="Permalink to “wangeditor 富文本”">​</a></h2><p>如<code>body</code>字段</p><p>在html中</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;?=$vue-&gt;editor($field)?&gt;</span></span></code></pre></div><p>设置编辑器值</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>app.update_editor(&#39;$field&#39;, &#39;演示内容&#39;);</span></span></code></pre></div><h2 id="压缩js" tabindex="-1">压缩JS <a class="header-anchor" href="#压缩js" aria-label="Permalink to “压缩JS”">​</a></h2><p>安装</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>yarn add --dev javascript-obfuscator</span></span></code></pre></div><p>配置</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$config[&#39;vue_encodejs&#39;] = true;</span></span>
<span class="line"><span>$config[&#39;vue_ignore&#39;] = [&#39;文件&#39;];</span></span></code></pre></div><h3 id="一般函数" tabindex="-1">一般函数 <a class="header-anchor" href="#一般函数" aria-label="Permalink to “一般函数”">​</a></h3><p>每个季度开始、结束时间</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>vue_get_jidu_array($year)</span></span></code></pre></div><p>某月的最后一天</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>vue_get_last_day($month = &#39;2023-07&#39;)</span></span></code></pre></div><h2 id="vue导入文件" tabindex="-1">vue导入文件 <a class="header-anchor" href="#vue导入文件" aria-label="Permalink to “vue导入文件”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>$import = $vue-&gt;get_import([</span></span>
<span class="line"><span>    &#39;js&#39;=&gt;&quot; alert(&#39;导入成功&#39;);&quot;;</span></span>
<span class="line"><span>    &#39;upload_url&#39;=&gt;&#39;/sys/upload/one&#39;,</span></span>
<span class="line"><span>    &#39;parse_url&#39;=&gt;&#39;/product_quality/goods/import_parse&#39;,</span></span>
<span class="line"><span>    &#39;save_url&#39;=&gt;&#39;/product_quality/goods/import_parse_save&#39;,</span></span>
<span class="line"><span>    &#39;label&#39;=&gt;&#39;导入xls&#39;,</span></span>
<span class="line"><span>    &#39;table_body&#39;=&gt;&#39;</span></span>
<span class="line"><span>    &lt;el-table-column   prop=&quot;desc&quot;  label=&quot;产品名称&quot; width=&quot;&quot;&gt;&lt;/el-table-column&gt;</span></span>
<span class="line"><span>    &lt;el-table-column   prop=&quot;reg_num&quot;  label=&quot;状态&quot; width=&quot;&quot;&gt;</span></span>
<span class="line"><span>         &lt;template slot-scope=&quot;scope&quot;&gt;</span></span>
<span class="line"><span>            &lt;span v-if=&quot;scope.row.is_err&quot;&gt;</span></span>
<span class="line"><span>              &lt;div v-html=&quot;scope.row.err&quot; style=&quot;color:red;font-size:12px;&quot;&gt;&lt;/div&gt;</span></span>
<span class="line"><span>            &lt;/span&gt;</span></span>
<span class="line"><span>            &lt;span v-else style=&quot;color:green;font-size:12px;&quot;&gt;</span></span>
<span class="line"><span>                可导入</span></span>
<span class="line"><span>            &lt;/span&gt;</span></span>
<span class="line"><span>         &lt;/template&gt;</span></span>
<span class="line"><span>    &lt;/el-table-column&gt;</span></span>
<span class="line"><span>    &#39;</span></span>
<span class="line"><span>]);</span></span></code></pre></div><p>返回 <code>html</code> <code>pop_html</code></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;?php </span></span>
<span class="line"><span>$html = $import[&#39;html&#39;];</span></span>
<span class="line"><span>?&gt;</span></span>
<span class="line"><span>&lt;?=$import[&#39;pop_html&#39;]?&gt;</span></span></code></pre></div><p>接口处理 import_parse</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>  $url = $this-&gt;input[&#39;url&#39;];</span></span>
<span class="line"><span>  $file = PATH.$url;</span></span>
<span class="line"><span>  if(!file_exists($file)){</span></span>
<span class="line"><span>    return json_error([&#39;msg&#39;=&gt;&#39;操作异常&#39;]);</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  $all = \lib\Xls::load($file,[ </span></span>
<span class="line"><span>        &#39;产品名称&#39;   =&gt; &#39;desc&#39;,</span></span>
<span class="line"><span>        &#39;规格型号&#39;   =&gt; &#39;spec&#39;,</span></span>
<span class="line"><span>        &#39;批号&#39;       =&gt; &#39;product_ph&#39;,</span></span>
<span class="line"><span>        &#39;生产日期&#39;   =&gt; &#39;produce_date&#39;,</span></span>
<span class="line"><span>        &#39;失效日期&#39;   =&gt; &#39;invalid_date&#39;,</span></span>
<span class="line"><span>        &#39;唯一码&#39;     =&gt; &#39;uuid&#39;,</span></span>
<span class="line"><span>        &#39;注册证号&#39;     =&gt; &#39;reg_num&#39;,</span></span>
<span class="line"><span>  ]);</span></span>
<span class="line"><span>  foreach($all as $k=&gt;$v){ </span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  if(!$all){</span></span>
<span class="line"><span>    return json_error([&#39;msg&#39;=&gt;&#39;导入的文件数据异常&#39;]);</span></span>
<span class="line"><span>  } </span></span>
<span class="line"><span>  foreach($all as $k=&gt;&amp;$v){</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  if($res){</span></span>
<span class="line"><span>    $err[] = &quot;唯一码已存在&quot;;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  $v[&#39;is_err&#39;] = false;</span></span>
<span class="line"><span>  if($err){</span></span>
<span class="line"><span>    $v[&#39;err&#39;] = implode(&quot;&lt;br&gt;&quot;,$err);</span></span>
<span class="line"><span>    $v[&#39;is_err&#39;] = true;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>if($all){</span></span>
<span class="line"><span>  $all = array_values($all);</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>return json_success([&#39;data&#39;=&gt;$all]);</span></span></code></pre></div><h2 id="分页、表格、搜索" tabindex="-1">分页、表格、搜索 <a class="header-anchor" href="#分页、表格、搜索" aria-label="Permalink to “分页、表格、搜索”">​</a></h2><p>搜索</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;?php </span></span>
<span class="line"><span>$url = &#39;/site/welcome/index&#39;;</span></span>
<span class="line"><span>echo element(&quot;filter&quot;,[ </span></span>
<span class="line"><span>    &#39;data&#39;=&gt;&#39;list&#39;,</span></span>
<span class="line"><span>    &#39;url&#39;=&gt;$url,</span></span>
<span class="line"><span>    &#39;is_page&#39;=&gt;true,</span></span>
<span class="line"><span>    &#39;init&#39;=&gt;true,</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;input&#39;,&#39;name&#39;=&gt;&#39;title&#39;,</span></span>
<span class="line"><span>        &#39;attr_element&#39;=&gt;[</span></span>
<span class="line"><span>            &#39;placeholder&#39;=&gt;&#39;名称&#39;,</span></span>
<span class="line"><span>        ],</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>]); </span></span>
<span class="line"><span>?&gt;</span></span></code></pre></div><p>其中<code>data</code>为<code>list</code>,将自动触发 <code>load_list()</code></p><p>表格</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;?php </span></span>
<span class="line"><span>echo element(&#39;table&#39;,[</span></span>
<span class="line"><span>    [&#39;name&#39;=&gt;&#39;open&#39;,&#39;:data&#39;=&gt;&#39;list&#39;,&#39;:height&#39;=&gt;&#39;height&#39;],</span></span>
<span class="line"><span>    [&#39;name&#39;=&gt;&#39;column&#39;,&#39;prop&#39;=&gt;&#39;title&#39;,&#39;label&#39;=&gt;&#39;名称&#39;,&#39;width&#39;=&gt;&#39;&#39;],</span></span>
<span class="line"><span>    [&#39;name&#39;=&gt;&#39;column&#39;,&#39;prop&#39;=&gt;&#39;count&#39;,&#39;label&#39;=&gt;&#39;成员数&#39;,&#39;width&#39;=&gt;&#39;&#39;],</span></span>
<span class="line"><span>    [&#39;name&#39;=&gt;&#39;column&#39;,&#39;prop&#39;=&gt;&#39;count&#39;,&#39;label&#39;=&gt;&#39;操作&#39;,&#39;width&#39;=&gt;&#39;100&#39;,</span></span>
<span class="line"><span>      &#39;tpl&#39;=&gt;[</span></span>
<span class="line"><span>          [&#39;name&#39;=&gt;&#39;button&#39;,&#39;label&#39;=&gt;&#39;成员&#39;,&#39;@click&#39;=&gt;&#39;show_user(scope.row)&#39;],</span></span>
<span class="line"><span>          [&#39;name&#39;=&gt;&#39;button&#39;,&#39;label&#39;=&gt;&#39;编辑&#39;,&#39;@click&#39;=&gt;&#39;edit(scope.row)&#39;,&#39;style&#39;=&gt;&#39;margin-left: 20px;&#39;],</span></span>
<span class="line"><span>       ]</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [&#39;name&#39;=&gt;&#39;close&#39;],</span></span>
<span class="line"><span>]);</span></span>
<span class="line"><span>?&gt;</span></span></code></pre></div><p>点击表格展开后显示表格或HTML</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;?php </span></span>
<span class="line"><span>echo element(&#39;table&#39;, [</span></span>
<span class="line"><span>    [&#39;name&#39; =&gt; &#39;open&#39;,&#39;:data&#39; =&gt; &#39;load_list&#39;,&#39;:height&#39; =&gt; &#39;height&#39;,&#39;default-expand-all&#39;],</span></span>
<span class="line"><span>    [&#39;name&#39; =&gt; &#39;column&#39;,&#39;prop&#39; =&gt; &#39;order_num&#39;,&#39;label&#39; =&gt; &#39;&#39;,</span></span>
<span class="line"><span>     &#39;type&#39; =&gt; &#39;expand&#39;,</span></span>
<span class="line"><span>     &#39;tpl&#39;=&gt; [</span></span>
<span class="line"><span>       [ </span></span>
<span class="line"><span>            &quot;type&quot;=&gt;&#39;html&#39;, </span></span>
<span class="line"><span>            &quot;html&quot;=&gt;element(&#39;table&#39;, [</span></span>
<span class="line"><span>                [&#39;name&#39; =&gt; &#39;open&#39;,&#39;:data&#39; =&gt; &#39;scope.row.detail&#39;],</span></span>
<span class="line"><span>                [&#39;name&#39; =&gt; &#39;column&#39;,&#39;prop&#39; =&gt; &#39;sale_order_num&#39;,&#39;label&#39; =&gt; &#39;销售单号&#39;,&#39;width&#39; =&gt; &#39;200&#39;],</span></span>
<span class="line"><span>                [&#39;name&#39; =&gt; &#39;column&#39;,&#39;prop&#39; =&gt; &#39;customer_name&#39;,&#39;label&#39; =&gt; &#39;客户&#39;,&#39;width&#39; =&gt; &#39;&#39;],</span></span>
<span class="line"><span>                [&#39;name&#39; =&gt; &#39;column&#39;,&#39;prop&#39; =&gt; &#39;product_name&#39;,&#39;label&#39; =&gt; &#39;产品名称&#39;,&#39;width&#39; =&gt; &#39;200&#39;],</span></span>
<span class="line"><span>                [&#39;name&#39; =&gt; &#39;column&#39;,&#39;prop&#39; =&gt; &#39;product_num&#39;,&#39;label&#39; =&gt; &#39;产品编号&#39;,&#39;width&#39; =&gt; &#39;200&#39;, </span></span>
<span class="line"><span>                    &quot;tpl&quot;=&gt;[</span></span>
<span class="line"><span>                        [</span></span>
<span class="line"><span>                            &#39;type&#39;=&gt;&#39;html&#39;,</span></span>
<span class="line"><span>                            &quot;html&quot;=&gt;&quot;</span></span>
<span class="line"><span>                               &lt;span :style=&#39;\&quot;background:\&quot;+scope.row.product_num_color&#39;&gt; {{scope.row.product_num}}&lt;/span&gt;</span></span>
<span class="line"><span>                            &quot;</span></span>
<span class="line"><span>                        ]</span></span>
<span class="line"><span>                    ]</span></span>
<span class="line"><span>                ],</span></span>
<span class="line"><span>                [&#39;name&#39; =&gt; &#39;column&#39;,&#39;prop&#39; =&gt; &#39;product_ph&#39;,&#39;label&#39; =&gt; &#39;批号&#39;,&#39;width&#39; =&gt; &#39;200&#39;],</span></span>
<span class="line"><span>                [&#39;name&#39; =&gt; &#39;column&#39;,&#39;prop&#39; =&gt; &#39;product_unit&#39;,&#39;label&#39; =&gt; &#39;单位&#39;,&#39;width&#39; =&gt; &#39;80&#39;], </span></span>
<span class="line"><span>                [&#39;name&#39; =&gt; &#39;close&#39;],</span></span>
<span class="line"><span>            ]) </span></span>
<span class="line"><span>        ]</span></span>
<span class="line"><span>     ]</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [&#39;name&#39; =&gt; &#39;column&#39;,&#39;prop&#39; =&gt; &#39;order_num&#39;,&#39;label&#39; =&gt; &#39;入库单号&#39;,&#39;width&#39; =&gt; &#39;200&#39;],</span></span>
<span class="line"><span>    [&#39;name&#39; =&gt; &#39;column&#39;,&#39;prop&#39; =&gt; &#39;num&#39;,&#39;label&#39; =&gt; &#39;数量&#39;,&#39;width&#39; =&gt; &#39;&#39;],</span></span>
<span class="line"><span>    [&#39;name&#39; =&gt; &#39;close&#39;],</span></span>
<span class="line"><span>]);</span></span>
<span class="line"><span>?&gt;</span></span></code></pre></div><p>其中<code>tpl</code>也支持直接写<code>type</code></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&quot;tpl&quot;=&gt;[ </span></span>
<span class="line"><span>    //&#39;type&#39;=&gt;&#39;html&#39;,</span><span> //此行可以没有</span></span>
<span class="line"><span>    &quot;html&quot;=&gt;&quot;</span></span>
<span class="line"><span>       &lt;span :style=&#39;\&quot;background:\&quot;+scope.row.product_num_color&#39;&gt; {{scope.row.product_num}}&lt;/span&gt;</span></span>
<span class="line"><span>    &quot; </span></span>
<span class="line"><span>]</span></span></code></pre></div><h2 id="vue分页" tabindex="-1">vue分页 <a class="header-anchor" href="#vue分页" aria-label="Permalink to “vue分页”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;?php </span></span>
<span class="line"><span>echo element(&quot;pager&quot;, [</span></span>
<span class="line"><span>    &#39;data&#39; =&gt; &#39;list&#39;,</span></span>
<span class="line"><span>    &#39;per_page&#39; =&gt; get_config(&#39;per_page&#39;), </span></span>
<span class="line"><span>    &#39;url&#39; =&gt; $url,</span></span>
<span class="line"><span>    &#39;reload_data&#39; =&gt; []</span></span>
<span class="line"><span>]);</span></span>
<span class="line"><span>?&gt;</span></span></code></pre></div><p>vue3</p><p>本系统默认使用vue2</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>\element\table::$scope = &#39;#default&#39;;</span></span></code></pre></div><p>表单</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>element\form::$model = &#39;form&#39;;</span></span>
<span class="line"><span>echo element(&#39;form&#39;,[ </span></span>
<span class="line"><span>    [&#39;type&#39;=&gt;&#39;open&#39;,&#39;model&#39;=&gt;&#39;form&#39;,&#39;label-width&#39;=&gt;&#39;180px&#39;],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;input&#39;,&#39;name&#39;=&gt;&#39;title&#39;,&#39;label&#39;=&gt;&#39;标题&#39;,</span></span>
<span class="line"><span>        &#39;attr&#39;=&gt;[&#39;required&#39;], </span></span>
<span class="line"><span>        &#39;attr_element&#39;=&gt;[&#39;placeholder&#39;=&gt;&#39;演示标题&#39;],</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [&#39;type&#39;=&gt;&#39;close&#39;]</span></span>
<span class="line"><span>]);</span></span></code></pre></div><h2 id="演示element-ui表单" tabindex="-1">演示element ui表单 <a class="header-anchor" href="#演示element-ui表单" aria-label="Permalink to “演示element ui表单”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;?php view_header(lang(&#39;小程序管理&#39;))?&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;el-form ref=&quot;form&quot;  label-width=&quot;180px&quot; label-position=&#39;top&#39;&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;div&gt;</span></span>
<span class="line"><span>    &lt;div&gt;单图：&lt;/div&gt;</span></span>
<span class="line"><span>    &lt;?php vue_upload_image(&#39;a&#39;)?&gt;</span></span>
<span class="line"><span>&lt;/div&gt;</span></span>
<span class="line"><span>&lt;div class=&quot;mt-2&quot;&gt;</span></span>
<span class="line"><span>    &lt;div&gt;多图：&lt;/div&gt;</span></span>
<span class="line"><span>    &lt;?php vue_upload_images(&#39;b&#39;)?&gt;</span></span>
<span class="line"><span>&lt;/div&gt;</span></span>
<span class="line"><span>&lt;div class=&quot;mt-2&quot;&gt;</span></span>
<span class="line"><span>    &lt;el-button @click=&quot;save&quot; type=&#39;primary&#39;&gt;在console中查看数据&lt;/el-button&gt;</span></span>
<span class="line"><span>&lt;/div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;?php </span></span>
<span class="line"><span>element\form::$model = &#39;form&#39;;</span></span>
<span class="line"><span>global $vue; </span></span>
<span class="line"><span>$vue-&gt;created([&#39;load()&#39;]);  </span></span>
<span class="line"><span>$vue-&gt;method(&#39;load()&#39;,&quot;</span></span>
<span class="line"><span>    app.update_editor(&#39;editor_1&#39;, &#39;演示内容&#39;);   </span></span>
<span class="line"><span>&quot;);</span></span>
<span class="line"><span>?&gt;</span></span>
<span class="line"><span>demo_data</span></span>
<span class="line"><span>&lt;?=$vue-&gt;editor(&#39;demo_data&#39;)?&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;?php </span></span>
<span class="line"><span>echo element(&#39;form&#39;,[ </span></span>
<span class="line"><span>    [&#39;type&#39;=&gt;&#39;open&#39;,&#39;model&#39;=&gt;&#39;form&#39;,],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;editor&#39;,&#39;name&#39;=&gt;&#39;editor_1&#39;,&#39;label&#39;=&gt;&#39;WangEditor 5&#39;, </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;editor&#39;,&#39;name&#39;=&gt;&#39;editor_2&#39;,&#39;label&#39;=&gt;&#39;WangEditor 5&#39;, </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;input&#39;,&#39;name&#39;=&gt;&#39;title&#39;,&#39;label&#39;=&gt;&#39;标题&#39;,</span></span>
<span class="line"><span>        &#39;attr&#39;=&gt;[&#39;required&#39;], </span></span>
<span class="line"><span>        &#39;attr_element&#39;=&gt;[&#39;placeholder&#39;=&gt;&#39;演示标题&#39;],</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;color&#39;,&#39;name&#39;=&gt;&#39;aa31&#39;,&#39;label&#39;=&gt;&#39;color&#39;, </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;datetime&#39;,&#39;name&#39;=&gt;&#39;aa32&#39;,&#39;label&#39;=&gt;&#39;datetime&#39;, </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;time&#39;,&#39;name&#39;=&gt;&#39;aa33&#39;,&#39;label&#39;=&gt;&#39;time&#39;, </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;tag&#39;,&#39;name&#39;=&gt;&#39;tag&#39;,&#39;label&#39;=&gt;&#39;tag&#39;, </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;upload&#39;,&#39;name&#39;=&gt;&#39;file_name&#39;,&#39;label&#39;=&gt;&#39;文件上传&#39;,&#39;multiple&#39;,</span></span>
<span class="line"><span>        &#39;mime&#39;=&gt;&#39;pdf,doc,docx,xls,xlsx,ppt,pptx&#39;, </span></span>
<span class="line"><span>        &#39;num&#39;=&gt;20,</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;spec&#39;,&#39;name&#39;=&gt;&#39;is_spec,sku&#39;,&#39;label&#39;=&gt;&#39;sku&#39;, </span></span>
<span class="line"><span>        &#39;attr&#39;=&gt;[&#39;image&#39;,&#39;stock&#39;,&#39;status&#39;],        </span></span>
<span class="line"><span>        &#39;js&#39;=&gt;&quot;app.add_media(&#39;upload_spec&#39;);&quot;</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;checkbox&#39;,&#39;name&#39;=&gt;&#39;checkbox&#39;,&#39;label&#39;=&gt;&#39;多选&#39;,</span></span>
<span class="line"><span>        &#39;value&#39;=&gt;[[&#39;label&#39;=&gt;&#39;选项1&#39;,&#39;value&#39;=&gt;1],[&#39;label&#39;=&gt;&#39;选项2&#39;,&#39;value&#39;=&gt;2],], </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;radio&#39;,&#39;name&#39;=&gt;&#39;radio&#39;,&#39;label&#39;=&gt;&#39;radio&#39;,</span></span>
<span class="line"><span>        &#39;value&#39;=&gt;[[&#39;label&#39;=&gt;&#39;选项1&#39;,&#39;value&#39;=&gt;1],[&#39;label&#39;=&gt;&#39;选项2&#39;,&#39;value&#39;=&gt;2],], </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;text&#39;,&#39;name&#39;=&gt;&#39;text&#39;,&#39;label&#39;=&gt;&#39;text&#39;, </span></span>
<span class="line"><span>        &#39;attr&#39;=&gt;[&#39;required&#39;,],</span></span>
<span class="line"><span>        &#39;attr_element&#39;=&gt;[&#39;:rows&#39;=&gt;10],</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;editor&#39;,&#39;name&#39;=&gt;&#39;editor&#39;,&#39;label&#39;=&gt;&#39;editor&#39;, </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    </span></span>
<span class="line"><span></span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;attribute&#39;,&#39;name&#39;=&gt;&#39;attribute&#39;,&#39;label&#39;=&gt;&#39;attribute&#39;, </span></span>
<span class="line"><span>        &#39;value&#39;=&gt;[ [&#39;label&#39;=&gt;&#39;选项1&#39;,&#39;value&#39;=&gt;1],[&#39;label&#39;=&gt;&#39;选项2&#39;,&#39;value&#39;=&gt;2],],  </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;select&#39;,&#39;name&#39;=&gt;&#39;select1&#39;,&#39;label&#39;=&gt;&#39;select单选&#39;, </span></span>
<span class="line"><span>        &#39;value&#39;=&gt;[ [&#39;label&#39;=&gt;&#39;选项1&#39;,&#39;value&#39;=&gt;1],[&#39;label&#39;=&gt;&#39;选项2&#39;,&#39;value&#39;=&gt;2],],  </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;select&#39;,&#39;name&#39;=&gt;&#39;select2&#39;,&#39;label&#39;=&gt;&#39;select多选&#39;, </span></span>
<span class="line"><span>        &#39;value&#39;=&gt;[ [&#39;label&#39;=&gt;&#39;选项1&#39;,&#39;value&#39;=&gt;1],[&#39;label&#39;=&gt;&#39;选项2&#39;,&#39;value&#39;=&gt;2],], </span></span>
<span class="line"><span>        &#39;attr_element&#39;=&gt;[&#39;multiple&#39;],</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;date&#39;,&#39;name&#39;=&gt;&#39;date1&#39;,&#39;label&#39;=&gt;&#39;时间&#39;, </span></span>
<span class="line"><span>        &#39;attr&#39;=&gt;[&#39;title&#39;=&gt;&#39;&#39;], </span></span>
<span class="line"><span>        &#39;attr_element&#39;=&gt;[&#39;:picker-options&#39;=&gt;&#39;pickerOptions&#39;,&#39;align&#39;=&gt;&quot;center&quot;],</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;autocomplete&#39;,&#39;name&#39;=&gt;&#39;title_auto&#39;,&#39;label&#39;=&gt;&#39;autocomplete&#39;, </span></span>
<span class="line"><span>        &#39;url&#39;=&gt;&#39;/demo_module/site/autocomplete&#39;,  </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;cascader&#39;,&#39;name&#39;=&gt;&#39;title_casc&#39;,&#39;label&#39;=&gt;&#39;cascader&#39;,  </span></span>
<span class="line"><span>        &#39;url&#39;=&gt;&#39;/demo_module/site/cascader&#39;, </span></span>
<span class="line"><span>        //&#39;options&#39; =&gt; &#39;tree_data&#39;, option url任选一个</span></span>
<span class="line"><span>        // :props ,checkStrictly: true</span></span>
<span class="line"><span>        &#39;attr_element&#39;=&gt;[&#39;:props&#39;=&gt;&quot;{value:&#39;id&#39;,label:&#39;label&#39;}&quot;],</span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    [</span></span>
<span class="line"><span>        &#39;type&#39;=&gt;&#39;upload&#39;,&#39;name&#39;=&gt;&#39;fiel&#39;,&#39;label&#39;=&gt;&#39;上传&#39;, </span></span>
<span class="line"><span>        &#39;url&#39;=&gt;&#39;/admin/upload&#39;,</span></span>
<span class="line"><span>        &#39;mime&#39;=&gt;&#39;jpg&#39;,</span></span>
<span class="line"><span>        &#39;multiple&#39;, </span></span>
<span class="line"><span>    ],</span></span>
<span class="line"><span>    [&#39;type&#39;=&gt;&#39;close&#39;]</span></span>
<span class="line"><span>]);</span></span>
<span class="line"><span>global $vue;</span></span>
<span class="line"><span>$vue-&gt;formData(&quot;editor&quot;,&quot;123465&quot;);</span></span>
<span class="line"><span>$vue-&gt;method(&quot;save()&quot;,&quot;</span></span>
<span class="line"><span>console.log(this.form);</span></span>
<span class="line"><span>&quot;);</span></span>
<span class="line"><span>?&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;/el-form&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>&lt;?php view_footer()?&gt;</span></span></code></pre></div><p>对应演示控制器</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;?php</span></span>
<span class="line"><span></span></span>
<span class="line"><span>namespace modules\demo_module\controller;</span></span>
<span class="line"><span>/**</span></span>
<span class="line"><span>* \core\AppController</span></span>
<span class="line"><span>* \core\ApiController  </span></span>
<span class="line"><span>* \core\AdminController</span></span>
<span class="line"><span>*/</span></span>
<span class="line"><span>class SiteController extends \core\AppController</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    public function actionIndex(){</span></span>
<span class="line"><span>        </span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>	/**</span></span>
<span class="line"><span>     * autocomplete</span></span>
<span class="line"><span>     * @permission 小程序.管理</span></span>
<span class="line"><span>     */</span></span>
<span class="line"><span>    public function actionAutocomplete()</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        $arr[] = [&#39;id&#39; =&gt; 1, &#39;value&#39; =&gt; &#39;test&#39;];</span></span>
<span class="line"><span>        $arr[] = [&#39;id&#39; =&gt; 2, &#39;value&#39; =&gt; &#39;test22&#39;];</span></span>
<span class="line"><span>        json($arr);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    /**</span></span>
<span class="line"><span>     * cascader</span></span>
<span class="line"><span>     * @permission 小程序.管理</span></span>
<span class="line"><span>     */</span></span>
<span class="line"><span>    public function actionCascader()</span></span>
<span class="line"><span>    {</span></span>
<span class="line"><span>        $d = \element\form::get_city();</span></span>
<span class="line"><span>        json_success([&#39;data&#39; =&gt; $d]);</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="vue图片上传" tabindex="-1">vue图片上传 <a class="header-anchor" href="#vue图片上传" aria-label="Permalink to “vue图片上传”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>&lt;div&gt;</span></span>
<span class="line"><span>    单图：</span></span>
<span class="line"><span>    &lt;?php vue_upload_image(&#39;image&#39;)?&gt;</span></span>
<span class="line"><span>&lt;/div&gt;</span></span>
<span class="line"><span>&lt;div&gt;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>多图：</span></span>
<span class="line"><span>    &lt;?php vue_upload_images(&#39;image&#39;)?&gt;</span></span>
<span class="line"><span>&lt;/div&gt;</span></span></code></pre></div><p>对应 <code>v-model</code> 为 <code>form.image</code></p><h2 id="多文件上传组件-带数量限制" tabindex="-1">多文件上传组件（带数量限制） <a class="header-anchor" href="#多文件上传组件-带数量限制" aria-label="Permalink to “多文件上传组件（带数量限制）”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>vue_upload_files($name = &#39;files&#39;, $top = &#39;form&#39;, $mime = &#39;&#39;, $max_files = 1)</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-7011f0d8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/nexophp/nexophp" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>最后更新于: <time datetime="2025-08-01T02:03:30.000Z" data-v-e98dd255></time></p></div></div><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"action.md\":\"CH-_5CNj\",\"db.md\":\"BKaeraIP\",\"fun.md\":\"CGGq2mTY\",\"guide.md\":\"BaoAUaJn\",\"home.md\":\"D2bjzo4m\",\"index.md\":\"CCPmL1cy\",\"module.md\":\"Cj0kaa1L\",\"route.md\":\"DBxN08r4\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"NexoPHP\",\"description\":\"NexoPHP 是一个基于 PHP 8.x 版本的框架，它的目标是为 PHP 开发者提供一个简单、快速、安全的软件开发框架\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"入门\",\"link\":\"/home\"},{\"text\":\"进阶\",\"link\":\"/guide\"},{\"text\":\"数据库\",\"link\":\"/db\"},{\"text\":\"函数\",\"link\":\"/fun\"},{\"text\":\"Action\",\"link\":\"/action\"},{\"text\":\"模块\",\"link\":\"/module\"}],\"sidebar\":\"auto\",\"outline\":{\"level\":[1,2],\"label\":\" \"},\"sidebarMenuCollapsed\":true,\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"editLink\":{\"pattern\":\"https://github.com/nexophp/nexophp\",\"text\":\"在 GitHub 上编辑此页面\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\",\"closeText\":\"关闭\"}}}}}}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>